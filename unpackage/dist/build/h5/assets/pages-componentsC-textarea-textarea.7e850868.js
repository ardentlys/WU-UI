var e,t;import{m as a,k as l,o,c as n,w as u,a as r,q as s,b as d,t as i,u as c,p as h,O as m,i as p,d as f,r as g}from"./index-11e68488.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";import{r as y}from"./uni-app.es.0596e349.js";const _=b({name:"wu-textarea",mixins:[a,l,{props:{modelValue:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},placeholderClass:{type:String,default:"textarea-placeholder"},placeholderStyle:{type:[String,Object],default:"color: #c0c4cc"},height:{type:[String,Number],default:70},confirmType:{type:String,default:"done"},disabled:{type:Boolean,default:!1},count:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},cursorSpacing:{type:Number,default:0},cursor:{type:[String,Number],default:""},showConfirmBar:{type:Boolean,default:!0},selectionStart:{type:Number,default:-1},selectionEnd:{type:Number,default:-1},adjustPosition:{type:Boolean,default:!0},disableDefaultPadding:{type:Boolean,default:!1},holdKeyboard:{type:Boolean,default:!1},maxlength:{type:[String,Number],default:140},border:{type:String,default:"surround"},formatter:{type:[Function,null],default:null},ignoreCompositionEvent:{type:Boolean,default:!0},customStyle:{type:Object,default:()=>({})},...null==(t=null==(e=uni.$w)?void 0:e.props)?void 0:t.textarea}}],data:()=>({innerValue:"",focused:!1,firstChange:!0,changeFromInner:!1,innerFormatter:e=>e}),watch:{modelValue:{immediate:!0,handler(e,t){this.propsValueChange(e)}}},computed:{textareaClass(){let e=[],{border:t,disabled:a}=this;return"surround"===t&&(e=e.concat(["wu-border","wu-textarea--radius"])),"bottom"===t&&(e=e.concat(["wu-border-bottom","wu-textarea--no-radius"])),a&&e.push("wu-textarea--disabled"),e.join(" ")},textareaStyle(){return this.$w.deepMerge({},this.$w.addStyle(this.customStyle))}},methods:{propsValueChange(e){this.innerValue=e,!1===this.firstChange&&!1===this.changeFromInner&&this.valueChange(),this.firstChange=!1,this.changeFromInner=!1},setFormatter(e){this.innerFormatter=e},onFocus(e){this.$emit("focus",e)},onBlur(e){this.$emit("blur",e),this.$w.formValidate(this,"blur")},onLinechange(e){this.$emit("linechange",e)},onInput(e){let{value:t=""}=e.detail||{};const a=(this.formatter||this.innerFormatter)(t);this.innerValue=t,this.$nextTick(()=>{this.innerValue=a,this.valueChange()})},valueChange(){const e=this.innerValue;this.$nextTick(()=>{this.$emit("input",e),this.changeFromInner=!0,this.$emit("change",e),this.$w.formValidate(this,"change")})},onConfirm(e){this.$emit("confirm",e)},onKeyboardheightchange(e){this.$emit("keyboardheightchange",e)}}},[["render",function(e,t,a,l,g,b){const y=m,_=p,w=f;return o(),n(w,{class:h(["wu-textarea",b.textareaClass]),style:s([b.textareaStyle])},{default:u(()=>[r(y,{class:"wu-textarea__field",value:g.innerValue,style:s({height:e.$w.addUnit(e.height)}),placeholder:e.placeholder,"placeholder-style":e.$w.addStyle(e.placeholderStyle,"string"),"placeholder-class":e.placeholderClass,disabled:e.disabled,focus:e.focus,autoHeight:e.autoHeight,fixed:e.fixed,cursorSpacing:e.cursorSpacing,cursor:e.cursor,showConfirmBar:e.showConfirmBar,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,adjustPosition:e.adjustPosition,disableDefaultPadding:e.disableDefaultPadding,holdKeyboard:e.holdKeyboard,maxlength:e.maxlength,confirmType:e.confirmType,ignoreCompositionEvent:e.ignoreCompositionEvent,onFocus:b.onFocus,onBlur:b.onBlur,onLinechange:b.onLinechange,onInput:b.onInput,onConfirm:b.onConfirm,onKeyboardheightchange:b.onKeyboardheightchange},null,8,["value","style","placeholder","placeholder-style","placeholder-class","disabled","focus","autoHeight","fixed","cursorSpacing","cursor","showConfirmBar","selectionStart","selectionEnd","adjustPosition","disableDefaultPadding","holdKeyboard","maxlength","confirmType","ignoreCompositionEvent","onFocus","onBlur","onLinechange","onInput","onConfirm","onKeyboardheightchange"]),e.count?(o(),n(_,{key:0,class:"wu-textarea__count",style:s({"background-color":e.disabled?"transparent":"#fff"})},{default:u(()=>[d(i(g.innerValue.length)+"/"+i(e.maxlength),1)]),_:1},8,["style"])):c("",!0)]),_:1},8,["class","style"])}],["__scopeId","data-v-de23b381"]]);const w=b({data:()=>({value1:"",value2:"统计字数",value3:"",value4:"",value5:""}),methods:{formatter:e=>e.replace(/[^0-9]/gi,"")}},[["render",function(e,t,a,l,s,i){const c=p,h=y(g("wu-textarea"),_),m=f;return o(),n(m,{class:"wu-page"},{default:u(()=>[r(m,{class:"wu-demo-block"},{default:u(()=>[r(c,{class:"wu-demo-block__title"},{default:u(()=>[d("基础使用")]),_:1}),r(m,{class:"wu-demo-block__content"},{default:u(()=>[r(h,{modelValue:s.value1,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value1=e),placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1}),r(m,{class:"wu-demo-block"},{default:u(()=>[r(c,{class:"wu-demo-block__title"},{default:u(()=>[d("字数统计")]),_:1}),r(m,{class:"wu-demo-block__content"},{default:u(()=>[r(h,{modelValue:s.value2,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value2=e),placeholder:"请输入内容",count:""},null,8,["modelValue"])]),_:1})]),_:1}),r(m,{class:"wu-demo-block"},{default:u(()=>[r(c,{class:"wu-demo-block__title"},{default:u(()=>[d("自动增高")]),_:1}),r(m,{class:"wu-demo-block__content"},{default:u(()=>[r(h,{modelValue:s.value3,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value3=e),placeholder:"请输入内容",autoHeight:""},null,8,["modelValue"])]),_:1})]),_:1}),r(m,{class:"wu-demo-block"},{default:u(()=>[r(c,{class:"wu-demo-block__title"},{default:u(()=>[d("禁用状态")]),_:1}),r(m,{class:"wu-demo-block__content"},{default:u(()=>[r(h,{modelValue:s.value4,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value4=e),placeholder:"文本域已被禁用",disabled:"",count:""},null,8,["modelValue"])]),_:1})]),_:1}),r(m,{class:"wu-demo-block"},{default:u(()=>[r(c,{class:"wu-demo-block__title"},{default:u(()=>[d("下划线模式")]),_:1}),r(m,{class:"wu-demo-block__content"},{default:u(()=>[r(h,{modelValue:s.value5,"onUpdate:modelValue":t[4]||(t[4]=e=>s.value5=e),placeholder:"请输入内容",border:"bottom"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})}]]);export{w as default};
