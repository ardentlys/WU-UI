import { $ux } from '../../index.uts'
import { xstyleMixin } from '../../libs/mixins/xstyle.uts'

export const UxColMixin = defineMixin({
	emits: ['click'],
	mixins: [xstyleMixin],
	data() {
		return {
	
		}
	},
	props: {
		// 弹性盒子
		flex: {
			type: Boolean,
			default: true
		},
		// 栅格占据的列数
		span: {
			type: Number,
			default: 12
		},
		// 分栏左边偏移
		offset: {
			type: Number,
			default: 0
		},
		// 栅格间隔
		gutter: {
			type: Number,
			default: 0
		},
		// 垂直对齐方式
		justify: {
			type: String,
			default: 'center'
		},
		// 水平排列方式
		align: {
			type: String,
			default: 'left'
		},
	},
	computed: {
		_justify() : string {
			if (this.justify == 'left' || this.justify == 'start') {
				return 'flex-start'
			} else if (this.justify == 'right' || this.justify == 'end') {
				return 'flex-end'
			} else if (this.justify == 'around' || this.justify == 'between') {
				return `space-${this.justify}`
			}
	
			return this.justify
		},
		_alignItem() : string {
			if (this.align == 'top' || this.align == 'start') {
				return 'flex-start'
			} else if (this.align == 'bottom' || this.align == 'end') {
				return 'flex-end'
			} else if (this.align == 'around' || this.align == 'between') {
				return `space-${this.align}`
			}
			
			return this.align
		},
		style() : any[] {
			let css = new Map<string, any | null>()
	
			css.set('justify-content', this._justify)
			css.set('align-items', this._alignItem)
		
			if(this.offset > 0) {
				css.set('margin-left', `${100 / 12 * this.offset}%`)
			}
			
			if(this.gutter > 0) {
				css.set('padding-left', `${this.gutter/2}px`)
				css.set('padding-right', `${this.gutter/2}px`)
			}
			
			css = $ux.Util.xStyle(css, this.margin, this.mt, this.mr, this.mb, this.ml, this.padding, this.pt, this.pr, this.pb, this.pl)
			
			return [css, this.xstyle]
		}
	},
	mounted() {
	
	},
	methods: {
		onClick(e: MouseEvent) {
			this.$emit('click', e)
		}
	},
})